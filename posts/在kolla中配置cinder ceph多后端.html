<article id="post-在kolla中配置cinder ceph多后端" class="article article-type-post " itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 class="article-title" itemprop="name">
      在kolla中配置cinder ceph多后端
    </h1>
  


  
  
  
  
    
<div style="margin-top:10px;">
  <span class="post-time">
    <span class="post-meta-item-icon">
      <!-- fonts.scss -->
      <!-- 百度字体平台:http://fontstore.baidu.com/static/editor/index.html -->
      <i class="icon-statistics"></i>
      <span class="post-meta-item-text"> 字数统计:</span>
      <span class="post-count">1.2k字</span>
    </span>
  </span>

  <span class="post-time">
    &nbsp; | &nbsp;
    <span class="post-meta-item-icon">
      <i class="icon-book icon"></i>
      <span class="post-meta-item-text"> 阅读时长≈</span>
      <span class="post-count">7分</span>
    </span>
  </span>
</div>


  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h3 id="利用kolla中配置cinder-ceph多后端"><a href="#利用kolla中配置cinder-ceph多后端" class="headerlink" title="利用kolla中配置cinder ceph多后端"></a>利用kolla中配置cinder ceph多后端</h3><p>我一台有2块硬盘，1块ssd（性能盘）和1块sata（容量盘），共有3台同样的服务器（控制计算存储融合）<br>/dev/sdb  ssd<br>/dev/sdc  sata<br><img src="https://ljw.howieli.cn/blog/2017-11-30/ceph.png" alt=""><br><a id="more"></a></p>
<h3 id="配置globals-yml-文件"><a href="#配置globals-yml-文件" class="headerlink" title="配置globals.yml 文件"></a>配置globals.yml 文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ceph_enable_cache: "yes"</div><div class="line">enable_ceph: "yes"</div><div class="line">enable_cinder: "yes"</div><div class="line">cinder_backend_ceph: "&#123;&#123; enable_ceph &#125;&#125;"</div></pre></td></tr></table></figure>
<h3 id="修改cinder配置（代码修改都在部署节点）"><a href="#修改cinder配置（代码修改都在部署节点）" class="headerlink" title="修改cinder配置（代码修改都在部署节点）"></a>修改cinder配置（代码修改都在部署节点）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> vim /etc/kolla/config/cinder.conf</span></div><div class="line">[DEFAULT]</div><div class="line">enabled_backends = rbd-1,ssd</div><div class="line">[ssd]</div><div class="line">volume_driver = cinder.volume.drivers.rbd.RBDDriver</div><div class="line">volume_backend_name = ssd</div><div class="line">rbd_pool = volumes-cache</div><div class="line">rbd_ceph_conf = /etc/ceph/ceph.conf</div><div class="line">rbd_flatten_volume_from_snapshot = false</div><div class="line">rbd_max_clone_depth = 5</div><div class="line">rbd_store_chunk_size = 4</div><div class="line">rados_connect_timeout = 5</div><div class="line">rbd_user = cinder</div><div class="line">rbd_secret_uuid = b89a2a40-c009-47da-ba5b-7b6414a1f759</div><div class="line"><span class="meta">#</span><span class="bash"> rbd_secret_uuid = xxxxxxxxxxxxxxxxxxxxxxxxxxx</span></div><div class="line">report_discard_supported = True</div><div class="line">image_upload_use_cinder_backend = True</div></pre></td></tr></table></figure>
<h3 id="给磁盘打标签"><a href="#给磁盘打标签" class="headerlink" title="给磁盘打标签"></a>给磁盘打标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">parted /dev/sdb -s -- mklabel gpt mkpart KOLLA_CEPH_OSD_BOOTSTRAP 1 -1</div><div class="line"></div><div class="line">parted /dev/sdc -s -- mklabel gpt mkpart KOLLA_CEPH_OSD_CACHE_BOOTSTRAP 1 -1</div></pre></td></tr></table></figure>
<h3 id="开始部署"><a href="#开始部署" class="headerlink" title="开始部署"></a>开始部署</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kolla-ansible deploy  -i /root/multinode</div></pre></td></tr></table></figure>
<h3 id="crushmap"><a href="#crushmap" class="headerlink" title="crushmap"></a>crushmap</h3><h3 id="获取crushmap"><a href="#获取crushmap" class="headerlink" title="获取crushmap"></a>获取crushmap</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> docker <span class="built_in">exec</span> -it ceph_mon bash</span></div><div class="line"><span class="meta">#</span><span class="bash"> ceph osd getcrushmap -o crushmap.old</span></div></pre></td></tr></table></figure>
<h4 id="反编译：此后就可以编辑crushmap文件了"><a href="#反编译：此后就可以编辑crushmap文件了" class="headerlink" title="反编译：此后就可以编辑crushmap文件了"></a>反编译：此后就可以编辑crushmap文件了</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> crushtool <span class="_">-d</span> crushmap.old -o crushmap.new</span></div></pre></td></tr></table></figure>
<h4 id="修改crushmap"><a href="#修改crushmap" class="headerlink" title="修改crushmap"></a>修改crushmap</h4><p>根据实际情况编写crushmap</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> vi crushmap.new</span></div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> begin crush map</span></div><div class="line">tunable choose_local_tries 0</div><div class="line">tunable choose_local_fallback_tries 0</div><div class="line">tunable choose_total_tries 50</div><div class="line">tunable chooseleaf_descend_once 1</div><div class="line">tunable chooseleaf_vary_r 1</div><div class="line">tunable straw_calc_version 1</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> devices</span></div><div class="line">device 0 osd.0</div><div class="line">device 1 osd.1</div><div class="line">device 2 osd.2</div><div class="line">device 3 osd.3</div><div class="line">device 4 osd.4</div><div class="line">device 5 osd.5</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> types</span></div><div class="line">type 0 osd</div><div class="line">type 1 host</div><div class="line">type 2 chassis</div><div class="line">type 3 rack</div><div class="line">type 4 row</div><div class="line">type 5 pdu</div><div class="line">type 6 pod</div><div class="line">type 7 room</div><div class="line">type 8 datacenter</div><div class="line">type 9 region</div><div class="line">type 10 root</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> buckets</span></div><div class="line">host 1.1.1.163 &#123;</div><div class="line">        id -2           # do not change unnecessarily</div><div class="line">        # weight 0.990</div><div class="line">        alg straw</div><div class="line">        hash 0  # rjenkins1</div><div class="line">        item osd.0 weight 0.990</div><div class="line">&#125;</div><div class="line">host 1.1.1.161 &#123;</div><div class="line">        id -3           # do not change unnecessarily</div><div class="line">        # weight 0.990</div><div class="line">        alg straw</div><div class="line">        hash 0  # rjenkins1</div><div class="line">        item osd.1 weight 0.990</div><div class="line">&#125;</div><div class="line">host 1.1.1.162 &#123;</div><div class="line">        id -4           # do not change unnecessarily</div><div class="line">        # weight 0.990</div><div class="line">        alg straw</div><div class="line">        hash 0  # rjenkins1</div><div class="line">        item osd.2 weight 0.990</div><div class="line">&#125;</div><div class="line">root default &#123;</div><div class="line">        id -1           # do not change unnecessarily</div><div class="line">        # weight 2.970</div><div class="line">        alg straw</div><div class="line">        hash 0  # rjenkins1</div><div class="line">        item 1.1.1.163 weight 0.990</div><div class="line">        item 1.1.1.161 weight 0.990</div><div class="line">        item 1.1.1.162 weight 0.990</div><div class="line">&#125;</div><div class="line">host 1.1.1.163-ssd &#123;</div><div class="line">        id -5           # do not change unnecessarily</div><div class="line">        # weight 0.470</div><div class="line">        alg straw</div><div class="line">        hash 0  # rjenkins1</div><div class="line">        item osd.4 weight 0.470</div><div class="line">&#125;</div><div class="line">host 1.1.1.161-ssd &#123;</div><div class="line">        id -6           # do not change unnecessarily</div><div class="line">        # weight 0.470</div><div class="line">        alg straw</div><div class="line">        hash 0  # rjenkins1</div><div class="line">        item osd.3 weight 0.470</div><div class="line">&#125;</div><div class="line">host 1.1.1.162-ssd &#123;</div><div class="line">        id -8           # do not change unnecessarily</div><div class="line">        # weight 0.470</div><div class="line">        alg straw</div><div class="line">        hash 0  # rjenkins1</div><div class="line">        item osd.5 weight 0.470</div><div class="line">&#125;</div><div class="line">root ssd &#123;</div><div class="line">        id -7           # do not change unnecessarily</div><div class="line">        # weight 1.410</div><div class="line">        alg straw</div><div class="line">        hash 0  # rjenkins1</div><div class="line">        item 1.1.1.163-ssd weight 0.470</div><div class="line">        item 1.1.1.161-ssd weight 0.470</div><div class="line">        item 1.1.1.162-ssd weight 0.470</div><div class="line">&#125;</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> rules</span></div><div class="line">rule replicated_ruleset &#123;</div><div class="line">        ruleset 0</div><div class="line">        type replicated</div><div class="line">        min_size 1</div><div class="line">        max_size 10</div><div class="line">        step take default</div><div class="line">        step chooseleaf firstn 0 type host</div><div class="line">        step emit</div><div class="line">&#125;</div><div class="line">rule disks &#123;</div><div class="line">        ruleset 1</div><div class="line">        type replicated</div><div class="line">        min_size 1</div><div class="line">        max_size 10</div><div class="line">        step take default</div><div class="line">        step chooseleaf firstn 0 type host</div><div class="line">        step emit</div><div class="line">&#125;</div><div class="line">rule ssd_releset &#123;</div><div class="line">        ruleset 2</div><div class="line">        type replicated</div><div class="line">        min_size 1</div><div class="line">        max_size 10</div><div class="line">        step take ssd</div><div class="line">        step chooseleaf firstn 0 type host</div><div class="line">        step emit</div><div class="line">&#125;</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> end crush map</span></div></pre></td></tr></table></figure>
<h4 id="重新编译"><a href="#重新编译" class="headerlink" title="重新编译"></a>重新编译</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> crushtool -c crushmap.new -o crushmap.bin</span></div></pre></td></tr></table></figure>
<h4 id="导入新的crushmap"><a href="#导入新的crushmap" class="headerlink" title="导入新的crushmap"></a>导入新的crushmap</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> ceph osd setcrushmap -i crushmap.bin</span></div></pre></td></tr></table></figure>
<h4 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"># ceph osd tree</div><div class="line">ID WEIGHT  TYPE NAME              UP/DOWN REWEIGHT PRIMARY-AFFINITY </div><div class="line">-7 1.40996 root ssd                                                 </div><div class="line">-5 0.46999     host 1.1.1.163-ssd                                   </div><div class="line"> 4 0.46999         osd.4               up  1.00000          1.00000 </div><div class="line">-6 0.46999     host 1.1.1.161-ssd                                   </div><div class="line"> 3 0.46999         osd.3               up  1.00000          1.00000 </div><div class="line">-8 0.46999     host 1.1.1.162-ssd                                   </div><div class="line"> 5 0.46999         osd.5               up  1.00000          1.00000 </div><div class="line">-1 2.96997 root default                                             </div><div class="line">-2 0.98999     host 1.1.1.163                                       </div><div class="line"> 0 0.98999         osd.0               up  1.00000          1.00000 </div><div class="line">-3 0.98999     host 1.1.1.161                                       </div><div class="line"> 1 0.98999         osd.1               up  1.00000          1.00000 </div><div class="line">-4 0.98999     host 1.1.1.162                                       </div><div class="line"> 2 0.98999         osd.2               up  1.00000          1.00000</div></pre></td></tr></table></figure>
<h3 id="创建pool"><a href="#创建pool" class="headerlink" title="创建pool"></a>创建pool</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> ceph osd pool create volumes-cache 64 64</span></div></pre></td></tr></table></figure>
<h3 id="设置pool的crushmap"><a href="#设置pool的crushmap" class="headerlink" title="设置pool的crushmap"></a>设置pool的crushmap</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> ceph osd pool <span class="built_in">set</span> volumes-cache crush_ruleset 2</span></div><div class="line"><span class="meta">#</span><span class="bash"> ceph osd dump |grep -i pool</span></div><div class="line">pool 1 'images' replicated size 1 min_size 1 crush_ruleset 1 object_hash rjenkins pg_num 128 pgp_num 128 last_change 285 flags hashpspool stripe_width 0</div><div class="line">pool 2 'volumes' replicated size 1 min_size 1 crush_ruleset 1 object_hash rjenkins pg_num 128 pgp_num 128 last_change 281 flags hashpspool stripe_width 0</div><div class="line">pool 3 'backups' replicated size 1 min_size 1 crush_ruleset 1 object_hash rjenkins pg_num 128 pgp_num 128 last_change 165 flags hashpspool stripe_width 0</div><div class="line">pool 4 'vms' replicated size 1 min_size 1 crush_ruleset 1 object_hash rjenkins pg_num 128 pgp_num 128 last_change 44 flags hashpspool stripe_width 0</div><div class="line">pool 5 'gnocchi' replicated size 1 min_size 1 crush_ruleset 1 object_hash rjenkins pg_num 128 pgp_num 128 last_change 35 flags hashpspool stripe_width 0</div><div class="line">pool 6 'volumes-cache' replicated size 3 min_size 2 crush_ruleset 2 object_hash rjenkins pg_num 64 pgp_num 64 last_change 62 flags hashpspool stripe_width 0</div></pre></td></tr></table></figure>
<h3 id="创建两个cinder卷类型"><a href="#创建两个cinder卷类型" class="headerlink" title="创建两个cinder卷类型"></a>创建两个cinder卷类型</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">source</span> /etc/kolla/admin-openrc.sh</span></div><div class="line"><span class="meta">#</span><span class="bash"> cinder <span class="built_in">type</span>-create SATA</span></div><div class="line"><span class="meta">#</span><span class="bash"> cinder <span class="built_in">type</span>-create SSD</span></div><div class="line"><span class="meta">#</span><span class="bash"> cinder <span class="built_in">type</span>-list</span></div><div class="line">+--------------------------------------+------+-------------+-----------+</div><div class="line">| ID                                   | Name | Description | Is_Public |</div><div class="line">+--------------------------------------+------+-------------+-----------+</div><div class="line">| 8c1079e5-90a3-4f6d-bdb7-2f25b70bc2c8 | SSD  |             | True      |</div><div class="line">| a605c569-1e88-486d-bd8e-7aba43ce1ef2 | SATA |             | True      |</div><div class="line">+--------------------------------------+------+-------------+-----------+</div></pre></td></tr></table></figure>
<h3 id="设置卷类型的key键值"><a href="#设置卷类型的key键值" class="headerlink" title="设置卷类型的key键值"></a>设置卷类型的key键值</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">cinder type-key SSD set volume_backend_name=ssd</div><div class="line">cinder type-key SATA set volume_backend_name=rbd-1</div><div class="line"><span class="meta">#</span><span class="bash"> cinder  extra-specs-list</span></div><div class="line">+--------------------------------------+------+----------------------------------+</div><div class="line">| ID                                   | Name | extra_specs                      |</div><div class="line">+--------------------------------------+------+----------------------------------+</div><div class="line">| 8c1079e5-90a3-4f6d-bdb7-2f25b70bc2c8 | SSD  | &#123;'volume_backend_name': 'ssd'&#125;   |</div><div class="line">| a605c569-1e88-486d-bd8e-7aba43ce1ef2 | SATA | &#123;'volume_backend_name': 'rbd-1'&#125; |</div><div class="line">+--------------------------------------+------+----------------------------------+</div></pre></td></tr></table></figure>
<h3 id="创建云硬盘验证"><a href="#创建云硬盘验证" class="headerlink" title="创建云硬盘验证"></a>创建云硬盘验证</h3><p><img src="https://ljw.howieli.cn/blog/2017-11-30/%E5%88%9B%E5%BB%BA%E4%BA%91%E7%A1%AC%E7%9B%98.png" alt=""></p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> cinder create --volume_type SSD --display_name vol-ssd 1</span></div><div class="line">+--------------------------------+--------------------------------------+</div><div class="line">| Property                       | Value                                |</div><div class="line">+--------------------------------+--------------------------------------+</div><div class="line">| attachments                    | []                                   |</div><div class="line">| availability_zone              | nova                                 |</div><div class="line">| bootable                       | false                                |</div><div class="line">| consistencygroup_id            | None                                 |</div><div class="line">| created_at                     | 2017-11-30T02:58:17.000000           |</div><div class="line">| description                    | None                                 |</div><div class="line">| encrypted                      | False                                |</div><div class="line">| id                             | e2df2b47-13ec-4503-a78b-2ab60cb5a34b |</div><div class="line">| metadata                       | &#123;&#125;                                   |</div><div class="line">| migration_status               | None                                 |</div><div class="line">| multiattach                    | False                                |</div><div class="line">| name                           | vol-ssd                              |</div><div class="line">| os-vol-host-attr:host          | control@ssd#ssd                      |</div><div class="line">| os-vol-mig-status-attr:migstat | None                                 |</div><div class="line">| os-vol-mig-status-attr:name_id | None                                 |</div><div class="line">| os-vol-tenant-attr:tenant_id   | 21c161dda51147fb9ff527aadfe1d81a     |</div><div class="line">| replication_status             | None                                 |</div><div class="line">| size                           | 1                                    |</div><div class="line">| snapshot_id                    | None                                 |</div><div class="line">| source_volid                   | None                                 |</div><div class="line">| status                         | creating                             |</div><div class="line">| updated_at                     | 2017-11-30T02:58:18.000000           |</div><div class="line">| user_id                        | 68601348f1264a4cb69f8f8f162e3f2a     |</div><div class="line">| volume_type                    | SSD                                  |</div><div class="line">+--------------------------------+--------------------------------------+</div><div class="line"><span class="meta">#</span><span class="bash"> cinder create --volume_type SATA --display_name vol-sata 1</span></div><div class="line">+--------------------------------+--------------------------------------+</div><div class="line">| Property                       | Value                                |</div><div class="line">+--------------------------------+--------------------------------------+</div><div class="line">| attachments                    | []                                   |</div><div class="line">| availability_zone              | nova                                 |</div><div class="line">| bootable                       | false                                |</div><div class="line">| consistencygroup_id            | None                                 |</div><div class="line">| created_at                     | 2017-11-30T02:59:07.000000           |</div><div class="line">| description                    | None                                 |</div><div class="line">| encrypted                      | False                                |</div><div class="line">| id                             | f3f53733-348d-4ff9-a472-445aed77c111 |</div><div class="line">| metadata                       | &#123;&#125;                                   |</div><div class="line">| migration_status               | None                                 |</div><div class="line">| multiattach                    | False                                |</div><div class="line">| name                           | vol-sata                             |</div><div class="line">| os-vol-host-attr:host          | None                                 |</div><div class="line">| os-vol-mig-status-attr:migstat | None                                 |</div><div class="line">| os-vol-mig-status-attr:name_id | None                                 |</div><div class="line">| os-vol-tenant-attr:tenant_id   | 21c161dda51147fb9ff527aadfe1d81a     |</div><div class="line">| replication_status             | None                                 |</div><div class="line">| size                           | 1                                    |</div><div class="line">| snapshot_id                    | None                                 |</div><div class="line">| source_volid                   | None                                 |</div><div class="line">| status                         | creating                             |</div><div class="line">| updated_at                     | None                                 |</div><div class="line">| user_id                        | 68601348f1264a4cb69f8f8f162e3f2a     |</div><div class="line">| volume_type                    | SATA                                 |</div><div class="line">+--------------------------------+--------------------------------------+</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash"> rbd -p volumes-cache ls|grep e2df2b47-13ec-4503<span class="_">-a</span>78b-2ab60cb5a34b</span></div><div class="line">volume-e2df2b47-13ec-4503-a78b-2ab60cb5a34b</div><div class="line"><span class="meta">#</span><span class="bash"> rbd -p volumes ls|grep f3f53733-348d-4ff9<span class="_">-a</span>472-445aed77c111</span></div><div class="line">volume-f3f53733-348d-4ff9-a472-445aed77c111</div></pre></td></tr></table></figure>

    

    
    <div class="page-reward">
      <a href="javascript:void(0);" class="page-reward-btn tooltip-top" target="_self">
        <div class="tooltip tooltip-east">
          <span class="tooltip-item">
            赏
          </span>
          <span class="tooltip-content">
            <span class="tooltip-text">
              <span class="tooltip-inner">
                <p class="reward-p"><i class="icon icon-quo-left"></i>谢谢你请我吃糖果<i
                    class="icon icon-quo-right"></i></p>
                <div class="reward-box">
                  
                  <div class="reward-box-item">
                    <img class="reward-img" src="/img/alipay.jpg">
                    <span class="reward-type">支付宝</span>
                  </div>
                  
                  
                  <div class="reward-box-item">
                    <img class="reward-img" src="/img/weixin.png">
                    <span class="reward-type">微信</span>
                  </div>
                  
                </div>
              </span>
            </span>
          </span>
        </div>
      </a>
    </div>
    

    
    <div class="declare"> 
      <ul class="post-copyright">
        <li>
          <strong>本文作者：</strong>
          李家旺
        </li>
        <li>
          <strong>本文链接：</strong>
          <a href="https://www.lijiawang.org/posts/在kolla中配置cinder ceph多后端.html" title="在kolla中配置cinder ceph多后端" target="_blank">https://www.lijiawang.org/posts/在kolla中配置cinder ceph多后端.html</a>
        </li>
        <li>
          <strong>版权声明： </strong>
          本博客所有文章除特别声明外，均采用 <a href="https://www.apache.org/licenses/LICENSE-2.0.html" rel="external nofollow" target="_blank">Apache License 2.0</a> 许可协议。转载请注明出处！
        </li>
      </ul>
    </div>
    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">ceph cinder</a>
        		</li>
      		
		</ul>
	</div>

    
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/openstack//" class="article-tag-list-link color5">openstack</a>
        		</li>
      		
		</ul>
	</div>


    

    
    
<div class="share-btn share-icons tooltip-left">
  <div class="tooltip tooltip-east">
    <span class="tooltip-item">
      <a href="javascript:;" class="share-sns share-outer">
        <i class="icon icon-share"></i>
      </a>
    </span>
    <span class="tooltip-content">
      <div class="share-wrap">
        <div class="share-icons">
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="icon icon-weibo"></i>
          </a>
          <!-- <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="icon icon-weixin"></i>
          </a> -->
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="icon icon-qq"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="icon icon-douban"></i>
          </a>
          <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a>
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="icon icon-facebook"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="icon icon-twitter"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="icon icon-google"></i>
          </a>
        </div>
      </div>
    </span>
  </div>
</div>

<div class="page-modal wx-share js-wx-box">
    <a class="close js-modal-close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
     <!-- <img src="//pan.baidu.com/share/qrcode?url=https://www.lijiawang.org/posts/在kolla中配置cinder ceph多后端.html" alt="微信分享二维码"> -->
    </div>
</div>

<div class="mask js-mask"></div>

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>


<nav id="article-nav">
  
    <a href="/posts/简单shell实现局域网IP扫描.html" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          shell实现局域网IP扫描
        
      </div>
    </a>
  
  
    <a href="/posts/kolla部署swift.html" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">kolla部署swift</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>


<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>













