<article id="post-kubeadm升级k8s集群(v1.15.3 to v1.16.0版)" class="article article-type-post " itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 class="article-title" itemprop="name">
      使用kubeadm升级kubernetes集群
    </h1>
  


  
  
  
  
    
<div style="margin-top:10px;">
  <span class="post-time">
    <span class="post-meta-item-icon">
      <!-- fonts.scss -->
      <!-- 百度字体平台:http://fontstore.baidu.com/static/editor/index.html -->
      <i class="icon-statistics"></i>
      <span class="post-meta-item-text"> 字数统计:</span>
      <span class="post-count">1.5k字</span>
    </span>
  </span>

  <span class="post-time">
    &nbsp; | &nbsp;
    <span class="post-meta-item-icon">
      <i class="icon-book icon"></i>
      <span class="post-meta-item-text"> 阅读时长≈</span>
      <span class="post-count">9分</span>
    </span>
  </span>
</div>


  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h3 id="kubeadm升级k8s集群-v1-15-3-to-v1-16-0版"><a href="#kubeadm升级k8s集群-v1-15-3-to-v1-16-0版" class="headerlink" title="kubeadm升级k8s集群(v1.15.3 to v1.16.0版)"></a><code>kubeadm</code>升级<code>k8s</code>集群(<code>v1.15.3 to v1.16.0</code>版)</h3><blockquote>
<p><code>Kubernetes</code>在2019年9月18日发布了年度的第三个版本<code>1.16</code>,本篇文章介绍使用<code>kubeadm</code>升级现在有的集群到<code>v1.16.0</code>。</p>
</blockquote>
<h3 id="Kubernetes-1-16版本的发布徽章"><a href="#Kubernetes-1-16版本的发布徽章" class="headerlink" title="Kubernetes 1.16版本的发布徽章"></a><code>Kubernetes 1.16</code>版本的发布徽章</h3><p><img src="https://ljw.howieli.cn/blog/2019-9-23/Kubernetes%201.16%E7%89%88%E6%9C%AC%E7%9A%84%E5%8F%91%E5%B8%83%E5%BE%BD%E7%AB%A0.jpg" alt="Kubernetes 1.16版本的发布徽章"></p>
<h3 id="查看k8s集群版本"><a href="#查看k8s集群版本" class="headerlink" title="查看k8s集群版本"></a>查看<code>k8s</code>集群版本</h3><p>查看当前的<code>k8s</code>版本<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master ~]# kubectl get nodes</div><div class="line">NAME         STATUS   ROLES    AGE   VERSION</div><div class="line">k8s-master   Ready    master   20d   v1.15.3</div><div class="line">k8s-node1    Ready    &lt;none&gt;   20d   v1.15.3</div><div class="line">k8s-node2    Ready    &lt;none&gt;   20d   v1.15.3</div><div class="line">k8s-node3    Ready    &lt;none&gt;   20d   v1.15.3</div></pre></td></tr></table></figure></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master ~]# kubeadm version</div><div class="line">kubeadm version: &amp;version.Info&#123;Major:"1", Minor:"15", GitVersion:"v1.15.3", GitCommit:"2d3c76f9091b6bec110a5e63777c332469e0cba2", GitTreeState:"clean", BuildDate:"2019-08-19T11:11:18Z", GoVersion:"go1.12.9", Compiler:"gc", Platform:"linux/amd64"&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master ~]# kubelet --version</div><div class="line">Kubernetes v1.15.3</div><div class="line"></div><div class="line"></div><div class="line">[root@k8s-master ~]# systemctl status kubelet.service |grep Active</div><div class="line">   Active: active (running) since Fri 2019-08-30 07:26:33 EDT; 3 weeks 0 days ago</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master yum.repos.d]# kubectl version</div><div class="line">Client Version: version.Info&#123;Major:&quot;1&quot;, Minor:&quot;15&quot;, GitVersion:&quot;v1.15.3&quot;, GitCommit:&quot;2d3c76f9091b6bec110a5e63777c332469e0cba2&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2019-08-19T11:13:54Z&quot;, GoVersion:&quot;go1.12.9&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125;</div><div class="line">Server Version: version.Info&#123;Major:&quot;1&quot;, Minor:&quot;15&quot;, GitVersion:&quot;v1.15.3&quot;, GitCommit:&quot;2d3c76f9091b6bec110a5e63777c332469e0cba2&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2019-08-19T11:05:50Z&quot;, GoVersion:&quot;go1.12.9&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125;</div></pre></td></tr></table></figure>
<h3 id="查看版本支持"><a href="#查看版本支持" class="headerlink" title="查看版本支持"></a>查看版本支持</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master yum.repos.d]# yum list kubelet kubeadm kubectl</div><div class="line">Loaded plugins: fastestmirror, langpacks</div><div class="line">Loading mirror speeds from cached hostfile</div><div class="line"> * base: mirrors.aliyun.com</div><div class="line"> * extras: mirrors.aliyun.com</div><div class="line"> * updates: mirrors.aliyun.com</div><div class="line">Installed Packages</div><div class="line">kubeadm.x86_64                                                        1.15.3-0                                                        @kubernetes</div><div class="line">kubectl.x86_64                                                        1.15.3-0                                                        @kubernetes</div><div class="line">kubelet.x86_64                                                        1.15.3-0                                                        @kubernetes</div><div class="line">Available Packages</div><div class="line">kubeadm.x86_64                                                        1.16.0-0                                                        kubernetes </div><div class="line">kubectl.x86_64                                                        1.16.0-0                                                        kubernetes </div><div class="line">kubelet.x86_64                                                        1.16.0-0                                                        kubernetes</div></pre></td></tr></table></figure>
<h3 id="升级kubelet-kubeadm-kubectl版本到1-16-0-每个节点都执行"><a href="#升级kubelet-kubeadm-kubectl版本到1-16-0-每个节点都执行" class="headerlink" title="升级kubelet kubeadm kubectl版本到1.16.0(每个节点都执行)"></a>升级<code>kubelet</code> <code>kubeadm</code> <code>kubectl</code>版本到<code>1.16.0</code>(每个节点都执行)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master ~]# yum install -y kubelet kubeadm kubectl</div><div class="line"><span class="meta">#</span><span class="bash"> systemctl daemon-reload &amp;&amp; systemctl restart kubelet &amp;&amp; systemctl status kubelet</span></div><div class="line"></div><div class="line"></div><div class="line">[root@k8s-master ~]# kubectl version</div><div class="line">Client Version: version.Info&#123;Major:"1", Minor:"16", GitVersion:"v1.16.0", GitCommit:"2bd9643cee5b3b3a5ecbd3af49d09018f0773c77", GitTreeState:"clean", BuildDate:"2019-09-18T14:36:53Z", GoVersion:"go1.12.9", Compiler:"gc", Platform:"linux/amd64"&#125;</div><div class="line">Server Version: version.Info&#123;Major:"1", Minor:"15", GitVersion:"v1.15.3", GitCommit:"2d3c76f9091b6bec110a5e63777c332469e0cba2", GitTreeState:"clean", BuildDate:"2019-08-19T11:05:50Z", GoVersion:"go1.12.9", Compiler:"gc", Platform:"linux/amd64"&#125;</div><div class="line">[root@k8s-master ~]# kubelet --version</div><div class="line">Kubernetes v1.16.0</div><div class="line">[root@k8s-master ~]# kubeadm version</div><div class="line">kubeadm version: &amp;version.Info&#123;Major:"1", Minor:"16", GitVersion:"v1.16.0", GitCommit:"2bd9643cee5b3b3a5ecbd3af49d09018f0773c77", GitTreeState:"clean", BuildDate:"2019-09-18T14:34:01Z", GoVersion:"go1.12.9", Compiler:"gc", Platform:"linux/amd64"&#125;</div></pre></td></tr></table></figure>
<h3 id="升级k8s集群"><a href="#升级k8s集群" class="headerlink" title="升级k8s集群"></a>升级<code>k8s</code>集群</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master ~]# kubectl get nodes</div><div class="line">NAME         STATUS   ROLES    AGE   VERSION</div><div class="line">k8s-master   Ready    master   21d   v1.15.3</div><div class="line">k8s-node1    Ready    &lt;none&gt;   20d   v1.15.3</div><div class="line">k8s-node2    Ready    &lt;none&gt;   20d   v1.15.3</div><div class="line">k8s-node3    Ready    &lt;none&gt;   20d   v1.15.3</div></pre></td></tr></table></figure>
<h3 id="升级集群"><a href="#升级集群" class="headerlink" title="升级集群"></a>升级集群</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master ~]# kubeadm config print init-defaults &gt; kubeadm1.16.yaml</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master ~]# cat kubeadm1.16.yaml </div><div class="line">apiVersion: kubeadm.k8s.io/v1beta2</div><div class="line">bootstrapTokens:</div><div class="line">- groups:</div><div class="line">  - system:bootstrappers:kubeadm:default-node-token</div><div class="line">  token: abcdef.0123456789abcdef</div><div class="line">  ttl: 24h0m0s</div><div class="line">  usages:</div><div class="line">  - signing</div><div class="line">  - authentication</div><div class="line">kind: InitConfiguration</div><div class="line">localAPIEndpoint:</div><div class="line">  advertiseAddress: 10.122.17.200</div><div class="line">  bindPort: 6443</div><div class="line">nodeRegistration:</div><div class="line">  criSocket: /var/run/dockershim.sock</div><div class="line">  name: k8s-master</div><div class="line">  taints:</div><div class="line">  - effect: NoSchedule</div><div class="line">    key: node-role.kubernetes.io/master</div><div class="line">---</div><div class="line">apiServer:</div><div class="line">  timeoutForControlPlane: 4m0s</div><div class="line">apiVersion: kubeadm.k8s.io/v1beta2</div><div class="line">certificatesDir: /etc/kubernetes/pki</div><div class="line">clusterName: kubernetes</div><div class="line">controllerManager: &#123;&#125;</div><div class="line">dns:</div><div class="line">  type: CoreDNS</div><div class="line">etcd:</div><div class="line">  local:</div><div class="line">    dataDir: /var/lib/etcd</div><div class="line">imageRepository: registry.aliyuncs.com/google_containers</div><div class="line">kind: ClusterConfiguration</div><div class="line">kubernetesVersion: v1.16.0</div><div class="line">networking:</div><div class="line">  dnsDomain: cluster.local</div><div class="line">  podSubnet: 192.168.0.0/16</div><div class="line">  serviceSubnet: 10.96.0.0/12</div><div class="line">scheduler: &#123;&#125;</div><div class="line">---</div><div class="line">apiVersion: kubeproxy.config.k8s.io/v1alpha1</div><div class="line">kind: KubeProxyConfiguration</div><div class="line">mode: ipvs</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master ~]# kubeadm upgrade apply --config kubeadm1.16.yaml</div><div class="line"></div><div class="line"></div><div class="line">.......</div><div class="line">.......</div><div class="line">.......</div><div class="line">[addons] Applied essential addon: CoreDNS</div><div class="line">[addons] Applied essential addon: kube-proxy</div><div class="line"></div><div class="line">[upgrade/successful] SUCCESS! Your cluster was upgraded to &quot;v1.16.0&quot;. Enjoy!</div><div class="line"></div><div class="line">[upgrade/kubelet] Now that your control plane is upgraded, please proceed with upgrading your kubelets if you haven&apos;t already done so.</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master ~]# kubectl version</div><div class="line">Client Version: version.Info&#123;Major:&quot;1&quot;, Minor:&quot;16&quot;, GitVersion:&quot;v1.16.0&quot;, GitCommit:&quot;2bd9643cee5b3b3a5ecbd3af49d09018f0773c77&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2019-09-18T14:36:53Z&quot;, GoVersion:&quot;go1.12.9&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125;</div><div class="line">Server Version: version.Info&#123;Major:&quot;1&quot;, Minor:&quot;16&quot;, GitVersion:&quot;v1.16.0&quot;, GitCommit:&quot;2bd9643cee5b3b3a5ecbd3af49d09018f0773c77&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2019-09-18T14:27:17Z&quot;, GoVersion:&quot;go1.12.9&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125;</div></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@k8s-node1 ~]# yum clean all</div><div class="line">[root@k8s-node1 ~]# yum install -y kubelet kubeadm kubectl</div><div class="line"></div><div class="line">systemctl daemon-reload &amp;&amp; systemctl restart kubelet &amp;&amp; systemctl status kubelet</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">[root@k8s-node1 ~]# kubectl version</div><div class="line">Client Version: version.Info&#123;Major:"1", Minor:"16", GitVersion:"v1.16.0", GitCommit:"2bd9643cee5b3b3a5ecbd3af49d09018f0773c77", GitTreeState:"clean", BuildDate:"2019-09-18T14:36:53Z", GoVersion:"go1.12.9", Compiler:"gc", Platform:"linux/amd64"&#125;</div><div class="line">The connection to the server localhost:8080 was refused - did you specify the right host or port?</div><div class="line">[root@k8s-node1 ~]# kubelet --version</div><div class="line">Kubernetes v1.16.0</div><div class="line">[root@k8s-node1 ~]# kubeadm version</div><div class="line">kubeadm version: &amp;version.Info&#123;Major:"1", Minor:"16", GitVersion:"v1.16.0", GitCommit:"2bd9643cee5b3b3a5ecbd3af49d09018f0773c77", GitTreeState:"clean", BuildDate:"2019-09-18T14:34:01Z", GoVersion:"go1.12.9", Compiler:"gc", Platform:"linux/amd64"&#125;</div></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master ~]# kubectl version</div><div class="line">Client Version: version.Info&#123;Major:"1", Minor:"16", GitVersion:"v1.16.0", GitCommit:"2bd9643cee5b3b3a5ecbd3af49d09018f0773c77", GitTreeState:"clean", BuildDate:"2019-09-18T14:36:53Z", GoVersion:"go1.12.9", Compiler:"gc", Platform:"linux/amd64"&#125;</div><div class="line">Server Version: version.Info&#123;Major:"1", Minor:"16", GitVersion:"v1.16.0", GitCommit:"2bd9643cee5b3b3a5ecbd3af49d09018f0773c77", GitTreeState:"clean", BuildDate:"2019-09-18T14:27:17Z", GoVersion:"go1.12.9", Compiler:"gc", Platform:"linux/amd64"&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">[root@k8s-master ~]# kubectl get nodes</div><div class="line">NAME         STATUS   ROLES    AGE   VERSION</div><div class="line">k8s-master   Ready    master   21d   v1.16.0</div><div class="line">k8s-node1    Ready    &lt;none&gt;   21d   v1.16.0</div><div class="line">k8s-node2    Ready    &lt;none&gt;   21d   v1.16.0</div><div class="line">k8s-node3    Ready    &lt;none&gt;   21d   v1.16.0</div><div class="line"></div><div class="line"></div><div class="line">[root@k8s-master ~]# kubectl get pod -A</div><div class="line">NAMESPACE       NAME                                        READY   STATUS    RESTARTS   AGE</div><div class="line">default         curl-6bf6db5c4f-dqw9x                       1/1     Running   2          20d</div><div class="line">ingress-nginx   nginx-ingress-controller-6956498fcf-jkzbs   1/1     Running   1          16d</div><div class="line">kube-system     calico-kube-controllers-65b8787765-hx9cr    1/1     Running   1          21d</div><div class="line">kube-system     calico-node-2rlsz                           1/1     Running   1          21d</div><div class="line">kube-system     calico-node-5vz46                           1/1     Running   1          21d</div><div class="line">kube-system     calico-node-6szsd                           1/1     Running   1          21d</div><div class="line">kube-system     calico-node-s5nmr                           1/1     Running   1          21d</div><div class="line">kube-system     calicoctl                                   1/1     Running   1          20d</div><div class="line">kube-system     coredns-58cc8c89f4-cnl45                    1/1     Running   1          26m</div><div class="line">kube-system     coredns-58cc8c89f4-nj8hr                    1/1     Running   1          9m4s</div><div class="line">kube-system     etcd-k8s-master                             1/1     Running   0          6m35s</div><div class="line">kube-system     kube-apiserver-k8s-master                   1/1     Running   0          6m30s</div><div class="line">kube-system     kube-controller-manager-k8s-master          1/1     Running   0          6m35s</div><div class="line">kube-system     kube-proxy-52mbf                            1/1     Running   1          26m</div><div class="line">kube-system     kube-proxy-gf75r                            1/1     Running   1          25m</div><div class="line">kube-system     kube-proxy-hbvjf                            1/1     Running   1          26m</div><div class="line">kube-system     kube-proxy-zppdf                            1/1     Running   1          26m</div><div class="line">kube-system     kube-scheduler-k8s-master                   1/1     Running   0          6m31s</div><div class="line">kube-system     kubernetes-dashboard-5dc4c54b55-c7sv2       1/1     Running   1          20d</div><div class="line"></div><div class="line"></div><div class="line">[root@k8s-master ~]# kubectl get pod</div><div class="line">NAME                    READY   STATUS    RESTARTS   AGE</div><div class="line">curl-6bf6db5c4f-dqw9x   1/1     Running   2          20d</div></pre></td></tr></table></figure>
<h3 id="验证cordns"><a href="#验证cordns" class="headerlink" title="验证cordns"></a>验证<code>cordns</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@k8s-master ~]# kubectl get pod</div><div class="line">NAME                    READY   STATUS    RESTARTS   AGE</div><div class="line">curl-6bf6db5c4f-dqw9x   1/1     Running   2          20d</div><div class="line">[root@k8s-master ~]# kubectl exec -it curl-6bf6db5c4f-dqw9x -- /bin/sh</div><div class="line">/bin/sh: shopt: not found</div><div class="line">[ root@curl-6bf6db5c4f-dqw9x:/ ]$ nslookup kubernetes.default</div><div class="line">Server:    10.96.0.10</div><div class="line">Address 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local</div><div class="line"></div><div class="line">Name:      kubernetes.default</div><div class="line">Address 1: 10.96.0.1 kubernetes.default.svc.cluster.local</div><div class="line">[ root@curl-6bf6db5c4f-dqw9x:/ ]$ exit</div><div class="line">[root@k8s-master ~]#</div></pre></td></tr></table></figure>
<h3 id="未解决的问题"><a href="#未解决的问题" class="headerlink" title="未解决的问题"></a>未解决的问题</h3><p><code>kubectl get cs</code>显示为<code>unknown</code><br>错误提示信息示例如下:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> kubectl get cs</span></div><div class="line">NAME                 AGE</div><div class="line">scheduler            &lt;unknown&gt;</div><div class="line">controller-manager   &lt;unknown&gt;</div><div class="line">etcd-0               &lt;unknown&gt;</div></pre></td></tr></table></figure></p>
<p>这个问题似乎对集群没有太大的影响，暂未解决，后续愿意确认之后会继续更新，如果有大神知道如何解决，请指点。</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>1、 <a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-upgrade/" target="_blank" rel="external">https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-upgrade/</a><br>2、 <a href="http://www.sohu.com/a/342118551_198222" target="_blank" rel="external">http://www.sohu.com/a/342118551_198222</a><br>3、 <a href="https://www.linuxidc.com/Linux/2019-09/160728.htm" target="_blank" rel="external">https://www.linuxidc.com/Linux/2019-09/160728.htm</a></p>

    

    
    <div class="page-reward">
      <a href="javascript:void(0);" class="page-reward-btn tooltip-top" target="_self">
        <div class="tooltip tooltip-east">
          <span class="tooltip-item">
            赏
          </span>
          <span class="tooltip-content">
            <span class="tooltip-text">
              <span class="tooltip-inner">
                <p class="reward-p"><i class="icon icon-quo-left"></i>谢谢你请我吃糖果<i
                    class="icon icon-quo-right"></i></p>
                <div class="reward-box">
                  
                  <div class="reward-box-item">
                    <img class="reward-img" src="/img/alipay.jpg">
                    <span class="reward-type">支付宝</span>
                  </div>
                  
                  
                  <div class="reward-box-item">
                    <img class="reward-img" src="/img/weixin.png">
                    <span class="reward-type">微信</span>
                  </div>
                  
                </div>
              </span>
            </span>
          </span>
        </div>
      </a>
    </div>
    

    
    <div class="declare"> 
      <ul class="post-copyright">
        <li>
          <strong>本文作者：</strong>
          李家旺
        </li>
        <li>
          <strong>本文链接：</strong>
          <a href="https://www.lijiawang.org/posts/kubeadm升级k8s集群(v1.15.3 to v1.16.0版).html" title="使用kubeadm升级kubernetes集群" target="_blank">https://www.lijiawang.org/posts/kubeadm升级k8s集群(v1.15.3 to v1.16.0版).html</a>
        </li>
        <li>
          <strong>版权声明： </strong>
          本博客所有文章除特别声明外，均采用 <a href="https://www.apache.org/licenses/LICENSE-2.0.html" rel="external nofollow" target="_blank">Apache License 2.0</a> 许可协议。转载请注明出处！
        </li>
      </ul>
    </div>
    

  </div>
  <div class="article-info article-info-index">
    
    
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">kubeadm</a>
        		</li>
      		
		</ul>
	</div>

    
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/kubernetes//" class="article-tag-list-link color1">kubernetes</a>
        		</li>
      		
		</ul>
	</div>


    

    
    
<div class="share-btn share-icons tooltip-left">
  <div class="tooltip tooltip-east">
    <span class="tooltip-item">
      <a href="javascript:;" class="share-sns share-outer">
        <i class="icon icon-share"></i>
      </a>
    </span>
    <span class="tooltip-content">
      <div class="share-wrap">
        <div class="share-icons">
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="icon icon-weibo"></i>
          </a>
          <!-- <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="icon icon-weixin"></i>
          </a> -->
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="icon icon-qq"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="icon icon-douban"></i>
          </a>
          <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a>
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="icon icon-facebook"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="icon icon-twitter"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="icon icon-google"></i>
          </a>
        </div>
      </div>
    </span>
  </div>
</div>

<div class="page-modal wx-share js-wx-box">
    <a class="close js-modal-close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
     <!-- <img src="//pan.baidu.com/share/qrcode?url=https://www.lijiawang.org/posts/kubeadm升级k8s集群(v1.15.3 to v1.16.0版).html" alt="微信分享二维码"> -->
    </div>
</div>

<div class="mask js-mask"></div>

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>


<nav id="article-nav">
  
    <a href="/posts/openstack instance vm_power_state 状态置为 NOSTATE.html" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          openstack instance vm_power_state 状态置为 NOSTATE
        
      </div>
    </a>
  
  
    <a href="/posts/在k8s上部署ingress-nginx并使用.html" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">在k8s上部署ingress-nginx并使用</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>


<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>













